<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <title>Kyle Hughes</title>
</head>

<body>
    <header>
        <h1>Greetings</h1>
        <nav>
            <ul>
                <li>
                    <a class='category-link' data-category='basic' href='#'>Basic</a>
                </li>
                <li>
                    <a class='category-link' data-category='intermediate' href='#'>Intermediate</a>
                </li>
                <li>
                    <a class='category-link' data-category='advanced' href='#'>Advanced</a>
                </li>
            </ul>
        </nav>
    </header>
    <main>
        <section id='navsec'>
            <div class='padding'>
                <h2>Tasks</h2>
                <nav>
                    <ol class='tasklist active' id='tasks-basic'>
                        <li><a href="#" class='task-link' data-page='basic/challenge1'>Challenge 1</a></li>
                        <li><a href="#" class='task-link' data-page='basic/challenge2'>Challenge 2</a></li>
                        <li><a href="#" class='task-link' data-page='basic/functions3events2'>Functions 3/</br>Events 2</a></li>
                        <li><a href="#" class='task-link' data-page='basic/strings'>Strings</a></li>
                        <li><a href="#" class='task-link' data-page='basic/arrays1strings3'>Arrays 1/</br>Strings 3</a></li>
                        <li><a href="#" class='task-link' data-page='basic/conditionals1'>Conditionals 1</a></li>
                        <li><a href="#" class='task-link' data-page='basic/iteration1'>Iteration 1</a></li>
                        <li><a href="#" class='task-link' data-page='basic/iteration2'>Iteration 2</a></li>
                    </ol>
                    <ol class='tasklist' id='tasks-intermediate'>
                        <li><a href="#" class='task-link' data-page='intermediate/fizzbuzz'>FizzBuzz</a></li>
                        <li><a href="#" class='task-link' data-page='intermediate/strings4'>Strings 4</a></li>
                        <li><a href="#" class='task-link' data-page='intermediate/iteration4'>Iteration 4</a></li>
                        <li><a href="#" class='task-link' data-page='intermediate/dom1'>DOM 1</a></li>
                        <li><a href="#" class='task-link' data-page='intermediate/json1'>JSON 1</a></li>
                        <li><a href="#" class='task-link' data-page='intermediate/json2'>JSON 2</a></li>
                        <li><a href="#" class='task-link' data-page='intermediate/garage/garage1'>Garage</a></li>
                        <li><a href="#" class='task-link' data-page='intermediate/garage/garage2'>Garage Admin</a></li>
                    </ol>
                    <ol class='tasklist' id='tasks-advanced'>
                        <li><a href="#" class='task-link' data-page='advanced/rektangles'>Rektangles</a></li>
                        <li><a href="#" class='task-link' data-page='advanced/cleaning/ex1'>Cleaning 1</a></li>
                        <li><a href="#" class='task-link' data-page='advanced/cleaning/ex2'>Cleaning 2</a></li>
                        <li><a href="#" class='task-link' data-page='advanced/cleaning/ex3'>Cleaning 3</a></li>
                        <li><a href="#" class='task-link' data-page='advanced/cleaning/ex4'>Cleaning 4</a></li>
                        <li><a href="#" class='task-link' data-page='advanced/language'>Rövarspråket</a></li>
                        <li><a href="#" class='task-link' data-page='advanced/hangman/index'>Hangman</a></li>
                    </ol>
                </nav>
            </div>
        </section>
        <section id='iframesec'>
            <iframe src="" frameborder="0"></iframe>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', e => {
            let iframe = document.querySelector('#iframesec>iframe')

            function setCategory(cat) {
                let active = document.querySelector('.tasklist.active')
                if (active)
                    active.classList.remove('active')
                document.getElementById(`tasks-${cat}`)
                    .classList.add('active')
                localStorage.setItem('category', cat)
            }

            function setTask(page) {
                iframe.src = 'tasks/' + page + '.html'
                localStorage.setItem('task', page)
            }
            let prevCategory = localStorage.getItem('category')
            let prevTask = localStorage.getItem('task')
            if (prevCategory)
                setCategory(prevCategory)
            if (prevTask)
                setTask(prevTask)



            let eles = document.getElementsByClassName('task-link')
            Array.prototype.forEach.call(eles, function (link) {
                link.addEventListener('click', e => {
                    setTask(e.target.getAttribute('data-page'))
                })
            }, this);

            let taskLists = document.getElementsByClassName('category-link')
            Array.prototype.forEach.call(taskLists, function (link) {
                link.addEventListener('click', e => {
                    setCategory(e.target.getAttribute('data-category'))
                })
            }, this);
        })
    </script>
</body>

</html>